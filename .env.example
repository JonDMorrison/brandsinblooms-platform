# Brands in Blooms Platform - Environment Configuration
# Copy this file to .env.local for development or use as reference for production

# =============================================================================
# CORE CONFIGURATION (Required)
# =============================================================================

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# Domain Configuration
NEXT_PUBLIC_APP_DOMAIN=localhost:3001
NEXT_PUBLIC_APP_URL=http://localhost:3001

# =============================================================================
# MULTI-DOMAIN SUPPORT (Optional)
# =============================================================================

# Additional allowed domains (comma-separated)
# ALLOWED_DOMAINS=example.com,another-domain.com

# =============================================================================
# CACHING CONFIGURATION (Optional)
# =============================================================================

# Redis Configuration
# REDIS_URL=redis://localhost:6379
# REDIS_HTTP_URL=https://your-redis-http-endpoint.com
# REDIS_TOKEN=your-redis-token

# Cache Settings
SITE_CACHE_TYPE=memory
SITE_CACHE_MAX_SIZE=1000

# Cache TTL (Time-To-Live) in seconds
# Subdomains change less frequently, cache longer
SITE_CACHE_TTL_SUBDOMAIN=3600

# Custom domains may change more frequently, cache shorter
SITE_CACHE_TTL_CUSTOM_DOMAIN=1800

# =============================================================================
# SECURITY CONFIGURATION (Optional)
# =============================================================================

# CSRF Protection
CSRF_PROTECTION=false
CSRF_SECRET_KEY=dev-csrf-secret-key-for-local-development
CSRF_COOKIE_NAME=__Host-csrf-token
CSRF_HEADER_NAME=x-csrf-token

# CORS Configuration
CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=http://localhost:3001,http://127.0.0.1:3001

# Rate Limiting
RATE_LIMIT_ENABLED=false
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Security Headers
SECURITY_HSTS=false
SECURITY_CSP=false
SECURITY_FRAME_OPTIONS=SAMEORIGIN
SECURITY_CONTENT_TYPE_OPTIONS=true

# =============================================================================
# ANALYTICS & MONITORING (Optional)
# =============================================================================

# Analytics
ANALYTICS_ENABLED=false
ANALYTICS_STORAGE_TYPE=memory
ANALYTICS_MAX_EVENTS=1000

# Monitoring (for production)
# MONITORING_EMAIL=alerts@yourdomain.com
# MONITORING_WEBHOOK=https://hooks.slack.com/your-webhook

# =============================================================================
# WEBHOOKS & API (Optional)
# =============================================================================

# Order Webhooks
ORDER_WEBHOOK_SECRET=your-webhook-secret

# Cron Jobs
CRON_SECRET=dev-cron-secret-key

# =============================================================================
# STRIPE PAYMENT PROCESSING (Required for checkout)
# =============================================================================

# Stripe API Keys
# Get these from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here

# Stripe Webhook Secret
# Get this from: https://dashboard.stripe.com/webhooks
# For local development, use Stripe CLI: stripe listen --forward-to localhost:3001/api/webhooks/stripe
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# =============================================================================
# EMAIL CONFIGURATION (Required for auth emails)
# =============================================================================

# Resend API Configuration
# Get API key from: https://resend.com/api-keys
# Required for: Magic links, password resets, email verification
RESEND_API_KEY=re_your_resend_api_key_here

# Email Sender Configuration
# For local development, use Resend's test domain:
SMTP_ADMIN_EMAIL=onboarding@resend.dev
SMTP_SENDER_NAME=Brands & Blooms

# For staging/production, use your verified domain:
# SMTP_ADMIN_EMAIL=noreply@blooms-staging.cc  # Staging
# SMTP_ADMIN_EMAIL=noreply@blooms.cc          # Production

# Note: To use Inbucket for local testing instead, comment out the
# [auth.email.smtp] section in supabase/config.toml and restart Supabase

# =============================================================================
# AI / LLM CONFIGURATION (Optional)
# =============================================================================

# OpenRouter Configuration
OPENROUTER_API_KEY=your-openrouter-api-key-here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_MODEL=qwen/qwen3-coder:exacto

# Website Scraping Service (for AI-powered site generation)
SCRAPING_SERVICE_URL=https://puppeteer-api-production-7bea.up.railway.app
SCRAPING_SERVICE_SALT=your-secret-salt-here
SCRAPING_SERVICE_TIMEOUT=30000
SCRAPING_SERVICE_MAX_RETRIES=2

# =============================================================================
# STORAGE CONFIGURATION (S3/CDN)
# =============================================================================

# Cloudflare R2 Configuration (Production)
R2_ACCOUNT_ID=your-cloudflare-r2-account-id
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key
R2_BUCKET_NAME=your-production-bucket-name

# MinIO Configuration (Development)
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_ENDPOINT=http://localhost:9000
MINIO_REGION=us-east-1
MINIO_BUCKET_NAME=local-images

# CDN Configuration
NEXT_PUBLIC_CDN_URL=http://localhost:9000

# =============================================================================
# SYSTEM CONFIGURATION
# =============================================================================

# Environment
NODE_ENV=development

# Feature Toggles
# Enable development features (Profile page link in user dropdown menu)
# Set to true for development, false for production/staging
NEXT_PUBLIC_ENABLE_DEV_FEATURES=true

# Server Port (automatically set by hosting platforms)
# PORT=3000

# Next.js Configuration
NEXT_TELEMETRY_DISABLED=1

# Bundle Analysis (development only)
# ANALYZE=true

# =============================================================================
# DEBUG LOGGING (Development Only)
# =============================================================================

# Enable debug logging categories (set to 'true' to enable)
# All debug logging is disabled by default for clean console output
# Useful for troubleshooting specific areas during development

# Site context and resolution debugging
DEBUG_SITE=false

# Data caching and persistence debugging
DEBUG_CACHE=false

# Loading state and data fetching debugging
DEBUG_LOADING=false

# Theme loading, CSS generation, and styling debugging
DEBUG_THEME=false

# General purpose debugging for miscellaneous logs
DEBUG_GENERAL=false

# Enable all debug categories at once (overrides individual settings)
DEBUG_ALL=false

# =============================================================================
# TESTING CONFIGURATION (Test Environment Only)
# =============================================================================

# Test Database (for integration tests)
TEST_SUPABASE_URL=http://127.0.0.1:54321
TEST_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
TEST_SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# For production deployment, override these values:
#
# NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY=your-production-anon-key
# SUPABASE_SERVICE_ROLE_KEY=your-production-service-role-key
# NEXT_PUBLIC_APP_DOMAIN=yourdomain.com
# NEXT_PUBLIC_APP_URL=https://yourdomain.com
# NODE_ENV=production
# NEXT_PUBLIC_ENABLE_DEV_FEATURES=false
# REDIS_URL=redis://your-redis-url
# SITE_CACHE_TTL_SUBDOMAIN=3600
# SITE_CACHE_TTL_CUSTOM_DOMAIN=1800
# CSRF_PROTECTION=true
# CSRF_SECRET_KEY=your-strong-production-secret
# RATE_LIMIT_ENABLED=true
# SECURITY_HSTS=true
# SECURITY_CSP=true
# ANALYTICS_ENABLED=true
# ANALYTICS_STORAGE_TYPE=database
# ANALYTICS_MAX_EVENTS=50000
# R2_ACCOUNT_ID=your-production-r2-account-id
# R2_ACCESS_KEY_ID=your-production-r2-access-key
# R2_SECRET_ACCESS_KEY=your-production-r2-secret-key
# R2_BUCKET_NAME=your-production-bucket-name
# NEXT_PUBLIC_CDN_URL=https://your-cdn-domain.com
# SCRAPING_SERVICE_URL=https://puppeteer-api-production-7bea.up.railway.app
# SCRAPING_SERVICE_SALT=your-production-scraping-salt
# SCRAPING_SERVICE_TIMEOUT=30000
# SCRAPING_SERVICE_MAX_RETRIES=2
# STRIPE_SECRET_KEY=sk_live_your_production_stripe_secret_key
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_your_production_stripe_publishable_key
# STRIPE_WEBHOOK_SECRET=whsec_your_production_webhook_secret
# RESEND_API_KEY=re_your_production_resend_api_key
# SMTP_ADMIN_EMAIL=noreply@blooms.cc
# SMTP_SENDER_NAME=Brands & Blooms

# =============================================================================
# CLOUDFLARE CUSTOM DOMAINS (Required for Custom Domain Feature)
# =============================================================================

# Cloudflare API Configuration
# Get these from: https://dash.cloudflare.com/profile/api-tokens
# Required permissions: Zone:Edit, Workers Routes:Edit
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token_here

# Cloudflare Zone Configuration
# Get zone ID from: https://dash.cloudflare.com > select domain > Overview (right sidebar)
CLOUDFLARE_ZONE_ID=your_zone_id_here

# Cloudflare Account ID
# Get from: https://dash.cloudflare.com > select domain > Overview (right sidebar)
CLOUDFLARE_ACCOUNT_ID=your_account_id_here

# Platform Domain Configuration
# Uses NEXT_PUBLIC_APP_DOMAIN (defined above in Domain Configuration section)
# The platform domain is automatically extracted from NEXT_PUBLIC_APP_DOMAIN
# If NEXT_PUBLIC_APP_DOMAIN has a *. prefix, it will be stripped
# Example: localhost:3001 -> localhost:3001, *.blooms.cc -> blooms.cc

# Proxy Subdomain (optional, defaults to "site-proxy")
# This subdomain will be used as the CNAME target for custom domains
# Full CNAME target will be: site-proxy.{NEXT_PUBLIC_APP_DOMAIN}
PLATFORM_PROXY_SUBDOMAIN=site-proxy

# Edge Proxy Worker Configuration
# Name of your Cloudflare Worker that handles custom domain routing
# This worker should already be deployed to your Cloudflare account
CLOUDFLARE_WORKER_NAME=custom-domain-proxy

# Optional: SSL Configuration
# CLOUDFLARE_SSL_METHOD=txt        # Validation method: txt | http | email
# CLOUDFLARE_SSL_TYPE=dv           # Certificate type: dv | ov | ev

# Optional: API Rate Limiting
# CLOUDFLARE_API_RATE_LIMIT=4      # Requests per second (default: 4)
# CLOUDFLARE_API_RETRY_MAX=3       # Max retry attempts (default: 3)
# CLOUDFLARE_API_RETRY_DELAY=1000  # Retry delay in ms (default: 1000)

# =============================================================================
# USAGE NOTES
# =============================================================================
# 
# Development Setup:
# 1. Copy this file to .env.local
# 2. Start Supabase: pnpm supabase:start
# 3. Update Supabase URLs/keys from the output
# 4. For subdomain testing, add to /etc/hosts:
#    127.0.0.1 site1.localhost
#    127.0.0.1 site2.localhost
# 
# Production Setup:
# 1. Set the production overrides above in your hosting environment
# 2. Use strong, unique secrets for all _SECRET and _KEY variables
# 3. Enable security features (CSRF, HSTS, CSP, rate limiting)
# 4. Configure Redis for better performance
# 5. Enable analytics and monitoring
#
# Required Variables (minimum for app to work):
# - NEXT_PUBLIC_SUPABASE_URL
# - NEXT_PUBLIC_SUPABASE_ANON_KEY  
# - NEXT_PUBLIC_APP_DOMAIN
#
# All other variables are optional with sensible defaults.