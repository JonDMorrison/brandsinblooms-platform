{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "Dockerfile.standalone",
    "buildCommand": null,
    "watchPatterns": [
      "src/**",
      "app/**",
      "public/**",
      "package.json",
      "next.config.js"
    ]
  },
  "deploy": {
    "healthcheckPath": "/api/health",
    "healthcheckTimeout": 100,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3,
    "numReplicas": 1,
    "startCommand": null,
    "environmentVariables": {
      "NODE_ENV": "production",
      "PORT": "${{PORT}}",
      "RAILWAY_ENVIRONMENT": "${{RAILWAY_ENVIRONMENT}}"
    },
    "services": [
      {
        "name": "web",
        "internal": false,
        "port": 3000
      }
    ]
  },
  "domains": {
    "production": [
      "${{RAILWAY_PUBLIC_DOMAIN}}",
      "*.blooms.cc",
      "blooms.cc"
    ],
    "staging": [
      "${{RAILWAY_STATIC_URL}}",
      "*.staging.blooms.cc"
    ]
  }
}